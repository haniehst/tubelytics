@(title: String)

<!DOCTYPE html>
<html>
<head>
    <title>@title</title>
</head>
<body>
<h1>WebSocket Demo</h1>
<input type="text" id="searchInput" placeholder="Type a search query..." />
<button id="sendQuery">Search</button>
<div id="results"></div>

<script>
    const socket = new WebSocket("ws://localhost:9000/ws/stream");

    socket.onopen = () => {
        console.log("WebSocket connected.");
    };

    socket.onmessage = (event) => {
        const results = JSON.parse(event.data);
        const resultsDiv = document.getElementById("results");
        resultsDiv.innerHTML = ""; // Clear previous results
        results.forEach(result => {
            const resultElement = document.createElement("div");
            resultElement.textContent = result;
            resultsDiv.appendChild(resultElement);
        });
    };

    socket.onclose = () => {
        console.log("WebSocket disconnected.");
    };

    document.getElementById("sendQuery").onclick = () => {
        const query = document.getElementById("searchInput").value;
        if (query) {
            socket.send(JSON.stringify({ query }));
        }
    };
</script>
</body>
</html>
